(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(10),l=a.n(c),r=a(6),o=a(4),i=a(13),j=a(31);j.a.defaults.baseURL="http://localhost:3001";const b=Object(i.b)(function(){const e=sessionStorage.getItem("token");return null===e||"null"===e?"":e}()),d=Object(i.b)(null);Object(i.a)((async()=>{try{if(sessionStorage.setItem("token",b.value),0!==b.value.length){const e=await j.a.get("/user/personal",{headers:{Authorization:"Bearer "+b.value}});d.value=e.data,console.log("userInfo (signals): ",d.value)}else d.value=null}catch(e){console.error(e.message)}}),[b.value]);var u=a(3);var h=()=>{const[e,t]=Object(s.useState)(null);return Object(s.useEffect)((()=>{(async()=>{try{for(;!d.value;)await new Promise((e=>setTimeout(e,100)));t(d.value),console.log("UserInfo (home): ",d.value)}catch(e){console.error(e.message)}})()}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Welcome to Golfiles!"}),e&&Object(u.jsxs)(s.Fragment,{children:[Object(u.jsxs)("p",{children:["Username: ",e.username]}),Object(u.jsxs)("p",{children:["Created Date: ",e.createdate]}),Object(u.jsxs)("p",{children:["Personal Data: ",e.personalData]})]})]})};a(9);var O=()=>{const[e,t]=Object(s.useState)(""),[a,n]=Object(s.useState)("");return Object(u.jsx)("div",{className:"page-content",children:Object(u.jsxs)("div",{className:"auth-form container",children:[Object(u.jsx)("div",{className:"title",children:"Login"}),Object(u.jsx)("input",{placeholder:"Username",type:"text",onChange:e=>t(e.target.value)}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{placeholder:"Password",type:"password",onChange:e=>n(e.target.value)}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{onClick:async()=>{try{const t=await j.a.postForm("/auth/login",{username:e,pw:a});console.log("Resp: ",t.data),d.value={userId:t.data.userId,username:t.data.username},console.log("UserInfo (login): ",d.value),b.value=t.data.jwtToken,alert("Login successful!"),window.location.href="/"}catch(t){console.log(t.message),alert("Login fails. Please check your username and pin.")}},children:"Login"})]})})};var x=()=>{const[e,t]=Object(s.useState)(""),[a,n]=Object(s.useState)("");return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"page-content",children:Object(u.jsxs)("div",{className:"auth-form container",children:[Object(u.jsx)("div",{className:"title",children:"Sign up"}),Object(u.jsx)("input",{placeholder:"Username",type:"text",onChange:e=>t(e.target.value)}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{placeholder:"Password",type:"password",onChange:e=>n(e.target.value)}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{onClick:()=>{const t=new FormData;t.append("username",e),t.append("pw",a),j.a.post("/auth/register",t).then((e=>{b.value=e.data.jwtToken,alert("Registration successful!")})).catch((e=>{console.error(e.message),alert("Username already exists. Please choose another.")}))},children:"Sign up"})]})})})};var m=()=>Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"About Us"}),Object(u.jsx)("p",{children:"This is #1 service for golfers."}),Object(u.jsx)("p",{children:"Measure your drives and add details (fairway, left, right, short, long, OB or hazard). Have all statics!"}),Object(u.jsx)("p",{children:"You are also able to compare your statics with other users."}),Object(u.jsx)("p",{children:"Have fun!"}),Object(u.jsx)("button",{onClick:()=>window.location.href="/",children:"Back"})]});a(29);var p=()=>{const{id:e}=Object(o.q)(),[t,a]=Object(s.useState)([]),[n,c]=Object(s.useState)([]);return Object(s.useEffect)((()=>{(async()=>{try{const e=await j.a.get("/user/user/{$id}");console.log("setUserData: ",e.data),a(e.data)}catch(e){console.log(e.message),alert("Could not load profile!")}})()}),[e]),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"user-info-block",children:[Object(u.jsx)("p",{className:"user-name-text",children:t.username}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Username"}),Object(u.jsx)("th",{children:"Created date"})]})}),Object(u.jsx)("tbody",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.username}),Object(u.jsx)("td",{children:t.create_time})]})})]})]})})};var g=()=>Object(u.jsx)("div",{children:Object(u.jsx)("h2",{children:"This page does not exist."})});function v(){return Object(u.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(u.jsx)("a",{className:"navbar-brand",href:"/",children:"Home"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(u.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{to:"/about",className:"nav-link",children:"About"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{to:"/user",className:"nav-link",children:"Profile"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{to:"/signup",className:"nav-link",children:"Sign up"})}),Object(u.jsx)("li",{className:"nav-item",children:0!==b.value.length?Object(u.jsx)(r.b,{to:"/logout",className:"nav-link",onClick:function(){b.value="",alert("Logout - thanks for using the app!"),window.location.href="/"},children:"Logout"}):Object(u.jsx)("span",{className:"nav-link",children:"Logged out"})})]})})]})}var f=()=>Object(u.jsxs)(r.a,{children:[Object(u.jsx)(v,{}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/",element:Object(u.jsx)(h,{})}),Object(u.jsx)(o.a,{path:"/login",element:Object(u.jsx)(O,{})}),Object(u.jsx)(o.a,{path:"/signup",element:Object(u.jsx)(x,{})}),Object(u.jsx)(o.a,{path:"/user/user/:id",element:Object(u.jsx)(p,{})}),Object(u.jsx)(o.a,{path:"/about",element:Object(u.jsx)(m,{})}),Object(u.jsx)(o.a,{path:"*",element:Object(u.jsx)(g,{})})]})]});l.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(f,{})}),document.getElementById("root"))},9:function(e,t,a){}},[[30,1,2]]]);
//# sourceMappingURL=main.267ceb93.chunk.js.map