{"version":3,"sources":["components/Signals.js","views/Home.js","views/Login.js","views/Signup.js","views/About.js","views/User.js","views/NotFound.js","components/NavigationBar.js","App.js","index.js"],"names":["axios","defaults","baseURL","jwtToken","signal","t","sessionStorage","getItem","getSessionToken","userInfo","effect","async","setItem","value","length","resp","get","headers","Authorization","data","console","log","error","message","Home","userInformation","setUserInformation","useState","useEffect","Promise","resolve","setTimeout","fetchData","_jsxs","children","_jsx","Fragment","username","createdate","personalData","Login","setUsername","pw","setPw","className","placeholder","type","onChange","e","target","onClick","postForm","userId","alert","window","location","href","Signup","_Fragment","signup","formData","FormData","append","post","then","catch","About","User","id","useParams","userData","setUserData","scoreData","setScoreData","userDataResponse","create_time","NotFound","NavigationBar","Link","to","App","Router","Routes","Route","path","element","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.267ceb93.chunk.js","sourcesContent":["// signals.js\r\n\r\nimport { signal, effect } from \"@preact/signals-react\";\r\nimport axios from \"axios\";\r\n\r\naxios.defaults.baseURL = 'http://localhost:3001';\r\n\r\nexport const jwtToken = signal(getSessionToken());\r\nexport const userInfo = signal(null);\r\n\r\nfunction getSessionToken(){\r\n    const t = sessionStorage.getItem('token');\r\n    return t === null || t === 'null' ? '' : t;\r\n}\r\n\r\neffect(async () => {\r\n    try {\r\n        sessionStorage.setItem('token', jwtToken.value);\r\n\r\n        if (jwtToken.value.length !== 0) {\r\n            const resp = await axios.get('/user/personal', {\r\n                headers: { Authorization: \"Bearer \" + jwtToken.value }\r\n            });\r\n\r\n            userInfo.value = resp.data;\r\n            console.log('userInfo (signals): ', userInfo.value);\r\n        } else {\r\n            userInfo.value = null;\r\n        }\r\n    } catch (error) {\r\n        console.error(error.message);\r\n    }\r\n}, [jwtToken.value]);\r\n","import React, { useState, useEffect, Fragment } from 'react';\r\nimport { userInfo, jwtToken } from '../components/Signals';\r\n\r\nconst Home = () => {\r\n  const [userInformation, setUserInformation] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Wait for userInfo to be updated\r\n        while (!userInfo.value) {\r\n          await new Promise(resolve => setTimeout(resolve, 100)); // Wait for 100 milliseconds\r\n        }\r\n\r\n        // Now userInfo has a value\r\n        setUserInformation(userInfo.value);\r\n        console.log('UserInfo (home): ', userInfo.value);\r\n      } catch (error) {\r\n        console.error(error.message);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []); // Empty dependency array to run the effect only once\r\n\r\n  return (\r\n    <div>\r\n      <h1>Welcome to Golfiles!</h1>\r\n      {userInformation && (\r\n        <Fragment>\r\n          <p>Username: {userInformation.username}</p>\r\n          <p>Created Date: {userInformation.createdate}</p>\r\n          <p>Personal Data: {userInformation.personalData}</p>\r\n        </Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { userInfo, jwtToken } from '../components/Signals';\r\nimport '../style.css';\r\n\r\nconst Login = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [pw, setPw] = useState('');\r\n\r\n    const login = async () => {\r\n        try {\r\n            const resp = await axios.postForm('/auth/login', { username, pw });\r\n\r\n            console.log('Resp: ', resp.data);\r\n            // Update userInfo and userId\r\n            userInfo.value = {\r\n                userId: resp.data.userId,\r\n                username: resp.data.username,\r\n            };\r\n            console.log('UserInfo (login): ', userInfo.value);\r\n            jwtToken.value = resp.data.jwtToken;\r\n\r\n            // Show success alert\r\n            alert('Login successful!');\r\n            // Navigate to the home page\r\n            window.location.href = '/';\r\n        } catch (error) {\r\n            console.log(error.message);\r\n            // Show error alert\r\n            alert('Login fails. Please check your username and pin.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='page-content'>\r\n            <div className='auth-form container'>\r\n                <div className=\"title\">Login</div>\r\n                <input placeholder='Username' type='text' onChange={e => setUsername(e.target.value)} /><br />\r\n                <input placeholder='Password' type='password' onChange={e => setPw(e.target.value)} /><br />\r\n                <button onClick={login}>Login</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { jwtToken } from '../components/Signals';\r\nimport '../style.css';\r\n\r\nconst Signup = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [pw, setPw] = useState('');\r\n\r\n    const signup = () => {\r\n        const formData = new FormData();\r\n        formData.append('username', username);\r\n        formData.append('pw', pw);\r\n\r\n        axios.post('/auth/register', formData)\r\n            .then(resp => {\r\n                jwtToken.value = resp.data.jwtToken;\r\n                // Show success alert\r\n                alert('Registration successful!'); \r\n            })\r\n            .catch(error => {\r\n                console.error(error.message);\r\n                // Show error alert\r\n                alert('Username already exists. Please choose another.');\r\n            });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className='page-content'>\r\n                <div className='auth-form container'>\r\n                    <div className=\"title\">Sign up</div>\r\n                    <input placeholder='Username' type='text' onChange={e => setUsername(e.target.value)} /><br />\r\n                    <input placeholder='Password' type='password' onChange={e => setPw(e.target.value)} /><br />\r\n                    <button onClick={signup}>Sign up</button>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Signup;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../style.css';\r\n\r\nconst About = () => (\r\n  <div>\r\n    <h2>About Us</h2>\r\n    <p>This is #1 service for golfers.</p>\r\n    <p>Measure your drives and add details (fairway, left, right, short, long, OB or hazard). Have all statics!</p>\r\n    <p>You are also able to compare your statics with other users.</p>\r\n    <p>Have fun!</p>\r\n    <button onClick={() => window.location.href = '/'}>Back</button>\r\n  </div>\r\n);\r\n\r\nexport default About;","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { userInfo } from '../components/Signals';\r\nimport '../style.css';\r\nimport './User.css';\r\nimport axios from \"axios\";\r\n\r\nconst User = () => {\r\n\r\n    const { id } = useParams();\r\n    const [userData, setUserData] = useState([]);\r\n    const [scoreData, setScoreData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const userDataResponse = await axios.get(`/user/user/{$id}`);\r\n                console.log('setUserData: ', userDataResponse.data);\r\n                setUserData(userDataResponse.data);\r\n            } catch (error) {\r\n                console.log(error.message);\r\n                alert('Could not load profile!');\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n    }, [id]);\r\n\r\n    return (\r\n        <div>\r\n            <div className='user-info-block'>\r\n                <p className='user-name-text'>{userData.username}</p>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Username</th>\r\n                            <th>Created date</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>{userData.username}</td>\r\n                            <td>{userData.create_time}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default User;\r\n","import React from 'react';\r\n\r\nconst NotFound = () => {\r\n  return (\r\n    <div>\r\n      <h2>This page does not exist.</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { jwtToken } from './Signals';\r\n\r\nexport default function NavigationBar() {\r\n   function logout() {\r\n      jwtToken.value = '';\r\n      alert('Logout - thanks for using the app!');\r\n      window.location.href = '/';\r\n   }\r\n\r\n   return (\r\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n         <a className=\"navbar-brand\" href=\"/\">Home</a>\r\n         <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n            <span className=\"navbar-toggler-icon\"></span>\r\n         </button>\r\n         <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n            <ul className=\"navbar-nav mr-auto\">\r\n               <li className=\"nav-item\">\r\n                  <Link to={'/about'} className='nav-link'>About</Link>\r\n               </li>\r\n               <li className=\"nav-item\">\r\n                  <Link to={'/user'} className='nav-link'>Profile</Link>\r\n               </li>\r\n               <li className=\"nav-item\">\r\n                  <Link to={'/login'} className='nav-link'>Login</Link>\r\n               </li>\r\n               <li className=\"nav-item\">\r\n                  <Link to={'/signup'} className='nav-link'>Sign up</Link>\r\n               </li>\r\n               <li className=\"nav-item\">\r\n                  {jwtToken.value.length !== 0 ? (\r\n                     <Link to={'/logout'} className='nav-link' onClick={logout}>Logout</Link>\r\n                  ) : (\r\n                     <span className=\"nav-link\">Logged out</span>\r\n                  )}\r\n               </li>\r\n            </ul>\r\n         </div>\r\n      </nav>\r\n   );\r\n}\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Link, Routes, Route } from 'react-router-dom';\r\n\r\nimport Home from './views/Home'\r\nimport Login from './views/Login'\r\nimport Signup from './views/Signup';\r\nimport About from './views/About';\r\nimport User from './views/User';\r\nimport NotFound from './views/NotFound';\r\n\r\nimport NavigationBar from './components/NavigationBar';\r\n\r\nconst App = () => (\r\n  <Router>\r\n    <NavigationBar />\r\n    <Routes>\r\n      <Route path=\"/\" element={<Home />} />\r\n      <Route path=\"/login\" element={<Login />} />\r\n      <Route path=\"/signup\" element={<Signup />} />\r\n      <Route path=\"/user/user/:id\" element={<User />} />\r\n      <Route path=\"/about\" element={<About />} />\r\n      <Route path='*' element={<NotFound />}/>\r\n    </Routes>\r\n  </Router>\r\n);\r\n\r\nexport default App;","// client/src/index.js\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}